<div xmlns="http://www.w3.org/1999/xhtml" xmlns:sdb="http://santedb.org/applet" class="container-fluid">

    <sdb:widget order="100000" name="org.santedb.emr.widget.patient.register.history" headerClass="alert-info"
        size="Large" type="Panel" context="org.santedb.emr.patient.register">
        <sdb:icon>fas fa-list</sdb:icon>
        <sdb:description lang="en">Clinical History Entry</sdb:description>
        <sdb:guard>scopedObject.participation.RecordTarget</sdb:guard>
    </sdb:widget>

    <div ng-controller="EmrPatientRegisterClinicalHistoryController">
        <ul class="nav nav-tabs" role="tablist" id="asdTabs">
            <li class="nav-item cursor-pointer" ng-repeat="(tpl, acts) in entryActs track by $index" role="presentation">
                <a data-target="#clinical-history-{{$index}}"
                    ng-class="{'active': $index == 0}" 
                    data-toggle="tab"
                    class="nav-link" >
                        {{ ::getTemplateName(tpl) }}
                </a>
            </li>
        </ul>

        <div class="tab-content clinical-history-tab">
            <div role="tabpanel" class="tab-pane fade" id="clinical-history-{{$index}}"
                ng-repeat="(tpl, acts) in entryActs track by $index" ng-class="{'active show': $index == 0}">
                    <div ng-switch="::hasBackEntry(tpl)">
                        <div ng-switch-when="true">
                            <ng-include src="::resolveTemplateBackentry(tpl)"></ng-include>
                        </div>
                        <div ng-switch-default="ng-switch-default" ng-init="act = acts[0]">
                            <ng-include src="::resolveTemplateForm(tpl)"></ng-include>
                        </div>
                    </div>
            </div>
        </div>
    </div>
</div>
